<div
  class="border rounded-md bg-background2 transition-colors duration-300"
  [class.border-accent]="isSelected && !isError"
  [class.border-primary2]="!isSelected && !isError"
  [class.border-error]="isError"
  [class.border-2]="isError"
>
  <!-- Header -->
  @if (draggable) {
    <div
      cdkDragHandle
      class="cursor-move flex flex-col items-center justify-center text-text2 hover:text-brand"
      (click)="$event.stopPropagation()"
    >
      â˜°
    </div>
  }
  <button
    (click)="onToggle()"
    class="grid grid-cols-[1fr_24px] w-full flex justify-between items-center px-4 py-3 bg-background3 rounded-md transition-colors duration-300"
    [class.text-accent]="isSelected && !isError"
    [class.text-primary2]="!isSelected && !isError"
    [class.text-error2]="isError"
  >
    <h4 class="font-semibold break-words">
      {{ title }}
    </h4>

    <span class="transition-transform duration-300 text-xl w-" [class.rotate-180]="open">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
      </svg>
    </span>
  </button>

  <div
    class="overflow-auto scrollbar-hide transition-all duration-300 px-4 scrollbar-thin"
    [class.max-h-0]="!open"
    [class.max-h-96]="open"
    [class.py-3]="open"
  >
    <ng-content cdkDragPreview></ng-content>
  </div>
</div>
